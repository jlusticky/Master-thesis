%=========================================================================
% (c) 2014, 2015 Josef Lusticky

\section{Software settings}\label{sec:analysis-settings}
The CentOS 7 operating system features various components that influence forwarding performance.
The performance of the CentOS~7 distribution kernel is measured in this thesis.
Further measurements also take the latest upstream kernel 4.0.2 into account~\cite{kernel-source}.

To measure a bare routing performance of the Linux kernel,
the Netfilter and SELinux components should be disabled.
If disabling the Netfilter is not appropriate,
the {\it{iptables}} utility must be used to configure the Netfilter to allow IP forwarding,
because the default rules do not allow packet forwarding in CentOS~7.
Additionally, SELinux should be disabled to prevent performance decrease.
SELinux in CentOS~7 uses Enforcing policy by default.
An influence of both the components on forwarding performance can be measured.

The Linux kernel features dynamic CPU frequency scaling.
The CPUFreq governors are policies that decide what frequency should be used.
The {\it{performance}} governor should be used during the measurements.
The {\it{performance}} governor sets the CPU statically to the
highest frequency available. %, which is 2.6~GHz in case of Intel Xeon E5-2630 v2.
The default governor is {\it{powersave}} in CentOS~7,
which sets the CPU statically to the lowest frequency~\cite{cpufreq-governors}.

To change the Linux kernel compile-time configuration, the kernel must be recompiled.
The CentOS~7 kernel provides a fair amount of features that could break existing setups when disabled.
The default kernel compile-time configuration does not have to provide the best routing performance,
however, it is usually used in most scenarios and hence its benchmark results are of interests for most people.

\input{analysis/settings-compile.tex}

\input{analysis/settings-procfs.tex}

\input{analysis/settings-sysfs.tex}

\input{analysis/settings-ethtool.tex}

%Note that ip route show displays the main table.
%For displaying the local table, you should run ip route show table local~\cite{linux-kernel-networking}.
