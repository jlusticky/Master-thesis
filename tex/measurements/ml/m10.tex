%=========================================================================
% (c) 2014, 2015 Josef Lusticky

%FINAL
\subsection{1 IPv4 flow}
\begin{tabular}{ | l | l | l | l | }
\hline
Frame size & \% of link & bandwidth & frame rate \\
\hline
AMS-IX & 15.22\% &  6.09~Gb/s & 1~000~000 \\
\hline
\end{tabular}
\\
\\
Routing performance of the Linux kernel version 4.0.2 on a single core is the same as the CentOS~7 distribution kernel 3.10.0-123.
The following listing shows the output of the {\it{perf}} tool.
\begin{lstlisting}
perf top -C 10
  11.25%  [kernel]            [k] _raw_spin_lock
   9.69%  [kernel]            [k] fib_table_lookup
   5.58%  [kernel]            [k] mlx4_en_xmit
   4.87%  [kernel]            [k] __memcpy
   4.65%  [kernel]            [k] mlx4_en_process_rx_cq
   2.98%  [kernel]            [k] put_compound_page
   2.73%  [kernel]            [k] __netif_receive_skb_core
   2.64%  [kernel]            [k] mlx4_en_poll_tx_cq
   2.43%  [kernel]            [k] ip_route_input_noref
   2.15%  [kernel]            [k] ip_rcv
\end{lstlisting}
As in case of the CentOS~7 distribution kernel,
the FIB table lookup and locking take most of the CPU's time.
